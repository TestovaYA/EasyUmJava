# Lesson-11.-Part-1.-Homework

## Подготовка базы данных.

Необходимо создать таблицы БД. СУБД выбираем MySQL.
Нужно подготовить скрипт DDL, который описывает создание базы данных и таблиц, используемых в этой лабораторной.

## JDBC

Реализовать подключение к БД посредством JDBC (Java DataBase Connectivity).

Согласно интерфейсу, реализовать методы ниже для обеих таблиц базы данных (где T – это имя вашей сущности):

```
public T save(T entity);
public void deleteById(long id);
public void deleteByEntity(T entity);
public void deleteAll();
public T update(T entity);
public T getById(long id);
public List<T> getAll();
```

Также необходимо реализовать метод, который возвращает все дочерние сущности по идентификатору родительской:

```
public List<T> getAllByVId(); // Здесь T – это дочерняя сущность, V – родительская.
```

## Hibernate

Реализовать подключение к БД посредством Hibernate - популярное ORM – решение для Java.

Согласно интерфейсу, реализовать методы ниже для обеих таблиц базы данных (где T – это имя вашей сущности):

```
public T save(T entity);
public void deleteById(long id);
public void deleteByEntity(T entity);
public void deleteAll();
public T update(T entity);
public T getById(long id);
public List<T> getAll();
```

Также необходимо реализовать метод, который возвращает все дочерние сущности по идентификатору родительской:
```
public List<T> getAllByVId();	// Здесь T – это дочерняя сущность, V – родительская.
```

## MyBatis

Реализовать подключение к БД посредством MyBatis – Java фреймворк для работы с сущностями БД.

Согласно интерфейсу, реализовать методы ниже для обеих таблиц базы данных (где T – это имя вашей сущности):

```
public T save(T entity);
public void deleteById(long id);
public void deleteByEntity(T entity);
public void deleteAll();
public T update(T entity);
public T getById(long id);
public List<T> getAll();
```

Также необходимо реализовать метод, который возвращает все дочерние сущности по идентификатору родительской:

```
public List<T> getAllByVId();		// Здесь T – это дочерняя сущность, V – родительская.
```

Для последнего метода необходимо описать условие: если дочерних сущностей больше 5, то нужно вернуть первые 5.

---
## Сделано:

*Хозяин*

| Название поля | Тип данных поля |
|---------------|-----------------|
| Идентификатор | Long            |
| Имя           | Varchar         |
| Дата рождения | Date            |

*Котик*

| Название поля | Тип данных поля |
|---------------|-----------------|
| Идентификатор | Long            |
| Имя           | Varchar         |
| Дата рождения | Date            |
| Порода        | Varchar         |
| Цвет          | Varchar         |
| Владелец      | Long            |

- В таблице «Котик» атрибут «Хозяин» является вторичным ключом для атрибута «Идентификатор» из таблицы «Хозяин»;
- Атрибуты «Идентификатор» в обеих таблицах должны быть первичными ключами;
- Атрибут «Цвет» таблицы «Котик» должен представлять из себя ограниченное количество значений: белый, рыжий, коричневый, серый, черный.

---
#### Скрипты для БД: ####

```
CREATE TABLE Owner (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    birth_date DATE NOT NULL
);

CREATE TABLE Cat (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    birth_date DATE NOT NULL,
    breed VARCHAR(100) NOT NULL,
    color ENUM('BLACK', 'WHITE', 'GREY', 'BROWN', 'ORANGE') NOT NULL,
    owner_id INT,
    FOREIGN KEY (owner_id) REFERENCES Owner(id) ON DELETE CASCADE
);
```
---
#### Добавление/получение 100 сущностей (50 котиков + 50 владельцев) по 3 замера: ####

* org/example/hibernate/HibernateExample.java:
  * Время добавления 100 сущностей в наносекундах: 114774100, Время получения 100 сущностей в наносекундах: 59001000
  * Время добавления 100 сущностей в наносекундах: 119583900, Время получения 100 сущностей в наносекундах: 56796700
  * Время добавления 100 сущностей в наносекундах: 113756400, Время получения 100 сущностей в наносекундах: 59293700
  

* org/example/jdbc/JdbcExample.java:
  * Время добавления 100 сущностей в наносекундах: 132217400, Время получения 100 сущностей в наносекундах: 5465800
  * Время добавления 100 сущностей в наносекундах: 131588700, Время получения 100 сущностей в наносекундах: 5339900
  * Время добавления 100 сущностей в наносекундах: 133837500, Время получения 100 сущностей в наносекундах: 5738500


* org/example/mybatis/MyBatisExample.java:
  * Время добавления 100 сущностей в наносекундах: 266285000, Время получения 100 сущностей в наносекундах: 18051400
  * Время добавления 100 сущностей в наносекундах: 263035600, Время получения 100 сущностей в наносекундах: 17088700
  * Время добавления 100 сущностей в наносекундах: 259756500, Время получения 100 сущностей в наносекундах: 16851400
---



