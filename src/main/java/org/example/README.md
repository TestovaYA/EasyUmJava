# Lesson-11.-Part-1.-Homework

## Подготовка базы данных.

Необходимо создать таблицы БД. СУБД выбираем MySQL.
Нужно подготовить скрипт DDL, который описывает создание базы данных и таблиц, используемых в этой лабораторной.

## JDBC

Реализовать подключение к БД посредством JDBC (Java DataBase Connectivity).

Согласно интерфейсу, реализовать методы ниже для обеих таблиц базы данных (где T – это имя вашей сущности):

```
public T save(T entity);
public void deleteById(long id);
public void deleteByEntity(T entity);
public void deleteAll();
public T update(T entity);
public T getById(long id);
public List<T> getAll();
```

Также необходимо реализовать метод, который возвращает все дочерние сущности по идентификатору родительской:

```
public List<T> getAllByVId(); // Здесь T – это дочерняя сущность, V – родительская.
```

## Hibernate

Реализовать подключение к БД посредством Hibernate - популярное ORM – решение для Java.

Согласно интерфейсу, реализовать методы ниже для обеих таблиц базы данных (где T – это имя вашей сущности):

```
public T save(T entity);
public void deleteById(long id);
public void deleteByEntity(T entity);
public void deleteAll();
public T update(T entity);
public T getById(long id);
public List<T> getAll();
```

Также необходимо реализовать метод, который возвращает все дочерние сущности по идентификатору родительской:
```
public List<T> getAllByVId();	// Здесь T – это дочерняя сущность, V – родительская.
```

## MyBatis

Реализовать подключение к БД посредством MyBatis – Java фреймворк для работы с сущностями БД.

Согласно интерфейсу, реализовать методы ниже для обеих таблиц базы данных (где T – это имя вашей сущности):

```
public T save(T entity);
public void deleteById(long id);
public void deleteByEntity(T entity);
public void deleteAll();
public T update(T entity);
public T getById(long id);
public List<T> getAll();
```

Также необходимо реализовать метод, который возвращает все дочерние сущности по идентификатору родительской:

```
public List<T> getAllByVId();		// Здесь T – это дочерняя сущность, V – родительская.
```

Для последнего метода необходимо описать условие: если дочерних сущностей больше 5, то нужно вернуть первые 5.

---
## Сделано:

*Хозяин*

| Название поля | Тип данных поля |
|---------------|-----------------|
| Идентификатор | Long            |
| Имя           | Varchar         |
| Дата рождения | Date            |

*Котик*

| Название поля | Тип данных поля |
|---------------|-----------------|
| Идентификатор | Long            |
| Имя           | Varchar         |
| Дата рождения | Date            |
| Порода        | Varchar         |
| Цвет          | Varchar         |
| Владелец      | Long            |

- В таблице «Котик» атрибут «Хозяин» является вторичным ключом для атрибута «Идентификатор» из таблицы «Хозяин»;
- Атрибуты «Идентификатор» в обеих таблицах должны быть первичными ключами;
- Атрибут «Цвет» таблицы «Котик» должен представлять из себя ограниченное количество значений: белый, рыжий, коричневый, серый, черный.

---
#### Скрипты для БД: ####

```
CREATE TABLE Owner (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    birth_date DATE NOT NULL
);

CREATE TABLE Cat (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    birth_date DATE NOT NULL,
    breed VARCHAR(100) NOT NULL,
    color ENUM('BLACK', 'WHITE', 'GREY', 'BROWN', 'ORANGE') NOT NULL,
    owner_id INT,
    FOREIGN KEY (owner_id) REFERENCES Owner(id) ON DELETE CASCADE
);
```
---
#### Добавление/получение 100 сущностей (50 котиков + 50 владельцев) по 3 замера: ####

* org/example/hibernate/HibernateExample.java:
  * Время добавления 100 сущностей в наносекундах: 114774100, Время получения 100 сущностей в наносекундах: 59001000
  * Время добавления 100 сущностей в наносекундах: 119583900, Время получения 100 сущностей в наносекундах: 56796700
  * Время добавления 100 сущностей в наносекундах: 113756400, Время получения 100 сущностей в наносекундах: 59293700
  

* org/example/jdbc/JdbcExample.java:
  * Время добавления 100 сущностей в наносекундах: 132217400, Время получения 100 сущностей в наносекундах: 5465800
  * Время добавления 100 сущностей в наносекундах: 131588700, Время получения 100 сущностей в наносекундах: 5339900
  * Время добавления 100 сущностей в наносекундах: 133837500, Время получения 100 сущностей в наносекундах: 5738500


* org/example/mybatis/MyBatisExample.java:
  * Время добавления 100 сущностей в наносекундах: 266285000, Время получения 100 сущностей в наносекундах: 18051400
  * Время добавления 100 сущностей в наносекундах: 263035600, Время получения 100 сущностей в наносекундах: 17088700
  * Время добавления 100 сущностей в наносекундах: 259756500, Время получения 100 сущностей в наносекундах: 16851400

---
#### Добавление/получение [25, 50, 100, 150, 250, 500, 1000] сущностей по 3 замера: ####

* org.example.hibernate.HibernateExample1
  * добавление [55426800, 39965000, 65349800, 75150000, 123158300, 194869700, 333428500]
  * получение [56753600, 2520300, 2515300, 2503200, 2308800, 2479400, 3484500]
  * ---
  * добавление [53271300, 44612000, 65820500, 74592400, 110196200, 192924300, 327336900]
  * получение [56786200, 2521600, 2525900, 2396900, 2456200, 2403400, 4073100]
  * ---
  * добавление [56179900, 40199500, 63946400, 76042400, 108379500, 184176700, 340768400]
  * получение [57017500, 2431600, 2431600, 2556000, 2558000, 2175800, 3555300]


средние значения:

добавление [54959333, 41592166, 65038900, 75261600, 113911333, 190656900, 333844600]

получение [56852433, 2491166, 2490933, 2485366, 2441000, 2352866, 3704300]

---
* org.example.jdbc.JdbcExample1
  * добавление [63883100, 44061000, 81747800, 108905600, 169161000, 324398700, 568648400]
  * получение [3287000, 2715200, 2490500, 1931000, 2105900, 2465700, 3054100]
  * ---
  * добавление [64076400, 44454700, 81820500, 102958100, 169256900, 336782800, 592430700]
  * получение [3236400, 2769500, 2379400, 1978200, 1911100, 2267400, 3023100]
  * ---
  * добавление [63829200, 48271400, 78894600, 105147900, 173252500, 292021800, 576872100]
  * получение [3276200, 2576700, 2461900, 1912100, 1814100, 2348500, 3069900]


средние значения:

добавление [63929566, 45595700, 80820966, 105670533, 170556800, 317734433, 579317066]

получение [3266533, 2687133, 2443933, 1940433, 1943700, 2360533, 3049033]

---
* org.example.mybatis.MyBatisExample1
  * добавление [214917400, 46321500, 72715100, 98343200, 186914900, 259046000, 514461700]
  * получение [14453600, 5228900, 4762600, 4254700, 4895500, 5367000, 6104000]
  * ---
  * добавление [202101900, 43883800, 75834900, 92931800, 142386500, 261025000, 494532500]
  * получение [13649100, 4773900, 4624200, 4296900, 4585600, 4858100, 5089700]
  * ---
  * добавление [199156600, 49042900, 76265300, 93387900, 142378400, 261161700, 491054800]
  * получение [13797400, 5158500, 4941600, 4572200, 4659900, 5256700, 6416300]


средние значения:

добавление [205391966, 46416066, 74938433, 94887633, 157226600, 260410900, 500016333]

получение [13966700, 5053766, 4776133, 4374600, 4713666, 5160600, 5870000]
